"use strict";function doEverything(){navigator.geolocation?navigator.geolocation.getCurrentPosition(function(o){window.longitude=o.coords.longitude,window.latitude=o.coords.latitude,console.log("latitude: "+latitude),console.log("longitude: "+longitude),$(".lat").text(window.latitude),$(".long").text(window.longitude),window.url="https://api.darksky.net/forecast/"+key+"/"+latitude+","+longitude,console.log(url),window.reverseGeocode="https://maps.googleapis.com/maps/api/geocode/json?latlng="+latitude+","+longitude+"&key=AIzaSyAc2pRb6K0kKlYCmaGrkyPTpYqjHoseUm0",$.ajax({type:"GET",url:reverseGeocode,success:function o(e){console.log("got location from latitude/longitude"),$(".location").show().val(e.results[0].address_components[2].short_name)},error:function o(){console.log("error during conversion")}}),$.ajax({type:"GET",url:url,dataType:"jsonp",success:function o(e){$("#loading").fadeOut(300),console.log("got your weather");var t=Math.round(e.currently.temperature);$(".temp").show().text("It's currently "+t+" degrees outside.");var n=e.currently.summary;$(".conditions").show().text("It's "+n+"."),$(".later").show().text(e.hourly.summary),window.conditionsIcon=e.currently.icon,$("icon").attr("class","icon").addClass(conditionsIcon);var r=Math.round(e.currently.windSpeed);$(".wind").show().text("The wind is "+r+" mph right now")},error:function o(){console.log("Error gathering weather, please refresh and try again."),console.log("or hit api limit, come back tomorrow"),$("#loading h1").text("Sorry, hit api limit, come back tomorrow...")}})},function(o){o.code==o.PERMISSION_DENIED&&$("#loading h1").text("I need your location")}):$("#loading h1").text("geolocation not supported, please upgrade your browser")}function submitForm(){$("form").submit(function(o){o.preventDefault(),searchToLocation(search),console.log("converting search: "+search+" to lat, long")})}function searchToLocation(){window.geocode="https://maps.googleapis.com/maps/api/geocode/json?address="+search,console.log(geocode),$.ajax({type:"GET",url:geocode,success:function o(e){window.latitude=e.results[0].geometry.location.lat,window.longitude=e.results[0].geometry.location.lng,window.search=e.results[0].address_components[1].short_name,$(".location").show().val(search),window.url="https://api.darksky.net/forecast/"+key+"/"+latitude+","+longitude,console.log("got "+search+" from latitude/longitude")},error:function o(){console.log("error during conversion")}}),$.ajax({type:"GET",url:url,dataType:"jsonp",success:function o(e){$("#loading").fadeOut(300),console.log("got your weather");var t=Math.round(e.currently.temperature);$(".temp").show().text("It's currently "+t+" degrees outside.");var n=e.currently.summary;$(".conditions").show().text("It's "+n+"."),$(".later").show().text(e.hourly.summary),window.conditionsIcon=e.currently.icon,$("icon").attr("class","icon").delay(2).addClass(conditionsIcon);var r=Math.round(e.currently.windSpeed);$(".wind").show().text("The wind is "+r+" mph right now")},error:function o(){console.log("Error gathering weather, please refresh and try again.")}})}var latitude=void 0,longitude=void 0,key=TOKEN,url=void 0,reverseGeocode=void 0,geocode=void 0,search=void 0,conditionsIcon=void 0;doEverything(),$("input").keyup(function(){search=$(this).val()}),document.onkeydown=function(){"13"==window.event.keyCode&&submitForm()};
//# sourceMappingURL=./main.min.js.map