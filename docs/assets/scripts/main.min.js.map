{"version":3,"sources":["../../../source/assets/scripts/main.js"],"names":["doEverything","navigator","geolocation","getCurrentPosition","position","window","longitude","coords","latitude","console","log","$","text","url","key","reverseGeocode","ajax","type","success","location","show","val","results","address_components","short_name","error","dataType","data","fadeOut","temp","Math","round","currently","temperature","conditions","summary","hourly","conditionsIcon","icon","attr","addClass","wind","windSpeed","code","PERMISSION_DENIED","submitForm","submit","event","preventDefault","searchToLocation","search","geocode","geometry","lat","lng","delay","TOKEN","keyup","this","document","onkeydown","keyCode"],"mappings":"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","file":"main.min.js","sourcesContent":["// @codekit-prepend 'jquery-3.1.1.min'\n\nlet latitude,\n    longitude,\n    key = TOKEN,\n    url,\n    reverseGeocode,\n    geocode,\n    search,\n    conditionsIcon;\n\nfunction doEverything() {\n\n  if (navigator.geolocation) {\n    navigator.geolocation.getCurrentPosition(function(position) {\n      window.longitude = position.coords.longitude;\n      window.latitude = position.coords.latitude;\n      /* eslint-disable */\n      console.log(`latitude: ${latitude}`);\n      console.log(`longitude: ${longitude}`);\n      /* eslint-disable */\n\n      $('.lat').text(window.latitude);\n      $('.long').text(window.longitude);\n\n      window.url = `https://api.darksky.net/forecast/${key}/${latitude},${longitude}`;\n      console.log(url);\n\n      window.reverseGeocode = `https://maps.googleapis.com/maps/api/geocode/json?latlng=${latitude},${longitude}&key=AIzaSyAc2pRb6K0kKlYCmaGrkyPTpYqjHoseUm0`;\n\n      $.ajax({\n        type: 'GET',\n        url: reverseGeocode,\n        success: function(location) {\n          /* eslint-disable */\n          console.log('got location from latitude/longitude');\n          /* eslint-disable */\n\n          $('.location').show().val(location.results[0].address_components[2].short_name);\n\n        },\n        error: function() {\n          /* eslint-disable */\n          console.log('error during conversion');\n          /* eslint-disable */\n        }\n      });\n\n      $.ajax({\n        type: 'GET',\n        url: url,\n        dataType: 'jsonp',\n        success: function(data) {\n          $('#loading').fadeOut(300);\n          /* eslint-disable */\n          console.log('got your weather');\n          /* eslint-disable */\n\n          let temp = Math.round(data.currently.temperature);\n\n          $('.temp').show().text(`It's currently ${temp} degrees outside.`);\n\n          let conditions = data.currently.summary;\n          $('.conditions').show().text(`It's ${conditions}.`);\n\n          $('.later').show().text(data.hourly.summary);\n\n          window.conditionsIcon = data.currently.icon;\n\n          $('icon').attr('class', 'icon').addClass(conditionsIcon);\n\n          let wind = Math.round(data.currently.windSpeed);\n\n          $('.wind').show().text(`The wind is ${wind} mph right now`);\n\n        },\n        error: function() {\n          /* eslint-disable */\n          console.log('Error gathering weather, please refresh and try again.');\n          console.log('or hit api limit, come back tomorrow');\n          /* eslint-disable */\n          $('#loading h1').text(`Sorry, hit api limit, come back tomorrow...`)\n        }\n      });\n\n    },\n    function(error) {\n      if (error.code == error.PERMISSION_DENIED) {\n        $('#loading h1').text('I need your location')\n      }\n    });\n  }\n  else {\n    $('#loading h1').text('geolocation not supported, please upgrade your browser');\n  }\n}\n\ndoEverything();\n\n\n$('input').keyup(function() {\n  search = $(this).val();\n});\n\n\nfunction submitForm() {\n  $('form').submit(function(event) {\n    event.preventDefault();\n    searchToLocation(search);\n    /* eslint-disable */\n    console.log(`converting search: ${search} to lat, long`);\n    /* eslint-disable */\n  });\n}\n\nfunction searchToLocation() {\n  window.geocode = `https://maps.googleapis.com/maps/api/geocode/json?address=${search}`\n  console.log(geocode);\n\n  $.ajax({\n    type: 'GET',\n    url: geocode,\n    success: function(location) {\n      window.latitude = location.results[0].geometry.location.lat;\n      window.longitude = location.results[0].geometry.location.lng;\n      window.search = location.results[0].address_components[1].short_name;\n\n\n      $('.location').show().val(search);\n\n      window.url = `https://api.darksky.net/forecast/${key}/${latitude},${longitude}`;\n\n      /* eslint-disable */\n      console.log(`got ${search} from latitude/longitude`);\n      /* eslint-disable */\n\n    },\n    error: function() {\n      /* eslint-disable */\n      console.log('error during conversion');\n      /* eslint-disable */\n    }\n  });\n\n  $.ajax({\n    type: 'GET',\n    url: url,\n    dataType: 'jsonp',\n    success: function(data) {\n      $('#loading').fadeOut(300);\n      /* eslint-disable */\n      console.log('got your weather');\n      /* eslint-disable */\n\n      let temp = Math.round(data.currently.temperature);\n      $('.temp').show().text(`It's currently ${temp} degrees outside.`);\n\n      let conditions = data.currently.summary;\n      $('.conditions').show().text(`It's ${conditions}.`);\n\n      $('.later').show().text(data.hourly.summary);\n\n      window.conditionsIcon = data.currently.icon;\n\n      $('icon').attr('class', 'icon').delay(2).addClass(conditionsIcon);\n\n      let wind = Math.round(data.currently.windSpeed);\n\n      $('.wind').show().text(`The wind is ${wind} mph right now`);\n\n    },\n    error: function() {\n      /* eslint-disable */\n      console.log('Error gathering weather, please refresh and try again.');\n      /* eslint-disable */\n    }\n  });\n}\n\ndocument.onkeydown=function(){\n  if(window.event.keyCode=='13'){\n    submitForm();\n  }\n}\n"]}